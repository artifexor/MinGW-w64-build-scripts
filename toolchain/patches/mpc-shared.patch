diff -upr mpc-0.9//configure src/mpc-0.9//configure
--- mpc-0.9//configure	2011-02-21 11:12:02.000000000 +0100
+++ src/mpc-0.9//configure	2011-05-01 10:42:57.000000000 +0200
@@ -4498,7 +4498,7 @@ case $host in
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DLL/static GMP" >&5
 $as_echo_n "checking for DLL/static GMP... " >&6; }
    if test "$enable_shared" = yes; then
-     LDFLAGS="$LDFLAGS -no-undefined"
+     LDFLAGS="$LDFLAGS -Wl,-no-undefined"
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
diff -upr mpc-0.9//m4/mpc.m4 src/mpc-0.9//m4/mpc.m4
--- mpc-0.9//m4/mpc.m4	2011-02-03 19:42:36.000000000 +0100
+++ src/mpc-0.9//m4/mpc.m4	2011-05-06 23:30:42.000000000 +0200
@@ -132,7 +132,7 @@ MPC_WINDOWS
 AC_DEFUN([MPC_WINDOWS], [
    AC_MSG_CHECKING(for DLL/static GMP)
    if test "$enable_shared" = yes; then
-     LDFLAGS="$LDFLAGS -no-undefined"
+     LDFLAGS="$LDFLAGS -Wl,-no-undefined"
      AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[
 #include "gmp.h"
 #if !__GMP_LIBGMP_DLL
diff -upr mpc-0.9//src/mpc.h src/mpc-0.9//src/mpc.h
--- mpc-0.9//src/mpc.h	2011-02-21 11:10:03.000000000 +0100
+++ src/mpc-0.9//src/mpc.h	2011-05-06 23:29:12.000000000 +0200
@@ -134,7 +134,7 @@ typedef __gmp_const __mpc_struct *mpc_sr
 /* Support for WINDOWS Dll:
    Check if we are inside a MPC build, and if so export the functions.
    Otherwise does the same thing as GMP */
-#if defined(__MPC_WITHIN_MPC) && __GMP_LIBGMP_DLL
+#if defined(__GMP_LIBGMP_DLL)
 # define __MPC_DECLSPEC __GMP_DECLSPEC_EXPORT
 #else
 # define __MPC_DECLSPEC __GMP_DECLSPEC
